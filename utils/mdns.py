#!/bin/python3

import socket
import struct

def listen():
  ADRESS = "224.0.0.251"
  PORT = 5353

  sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
  sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
  sock.bind((ADRESS, PORT))
  mreq = struct.pack("4sl", socket.inet_aton(ADRESS), socket.INADDR_ANY)
  sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)

  try:
    while True:
      data = sock.recv(4096)
      if (not data):
        print("Connection closed")
        break
      print(data)
  except KeyboardInterrupt:
    pass


def decode(data):
  print(struct.unpack('<HBBBBBBBBBBHHHH', data))

if __name__ == '__main__':
  decode(b'\x00\x00\x84\x00\x00\x00\x00\x08\x00\x00\x00\x05\x013\x011\x03168\x03192\x07in-addr\x04arpa\x00\x00\x0c\x80\x01\x00\x00\x00x\x00\x0f\x07Android\x05local\x00\x017\x019\x012\x018\x01A\x013\x015\x013\x019\x011\x013\x011\x01F\x018\x011\x01A\x01A\x01F\x01C\x013\x014\x017\x011\x018\x010\x017\x013\x011\x010\x010\x01A\x012\x03ip6\xc0 \x00\x0c\x80\x01\x00\x00\x00x\x00\x02\xc00\x017\x01A\x014\x011\x010\x010\x01D\x011\x013\x01F\x01F\x014\x018\x015\x011\x012\xc0_\x00\x0c\x80\x01\x00\x00\x00x\x00\x02\xc00\x01C\x014\x011\x01D\x01C\x01D\x016\x010\x014\x01C\x010\x01A\x019\x01B\x016\x016\x010\x010\x010\x010\x010\x010\x010\x010\x010\x010\x010\x010\x010\x018\x01E\x01F\xc0\x7f\x00\x0c\x80\x01\x00\x00\x00x\x00\x02\xc00\xc00\x00\x01\x80\x01\x00\x00\x00x\x00\x04\xc0\xa8\x01\x03\xc00\x00\x1c\x80\x01\x00\x00\x00x\x00\x10*\x00\x13p\x81t<\xfa\xa1\x8f\x13\x195:\x82\x97\xc00\x00\x1c\x80\x01\x00\x00\x00x\x00\x10*\x00\x13p\x81t<\xfa!XO\xf3\x1d\x00\x14\xa7\xc00\x00\x1c\x80\x01\x00\x00\x00x\x00\x10\xfe\x80\x00\x00\x00\x00\x00\x00f\xb9\xa0\xc4\x06\xdc\xd1L\xc0\x0c\x00/\x80\x01\x00\x00\x00x\x00\x06\xc0\x0c\x00\x02\x00\x08\xc0?\x00/\x80\x01\x00\x00\x00x\x00\x06\xc0?\x00\x02\x00\x08\xc0\x91\x00/\x80\x01\x00\x00\x00x\x00\x06\xc0\x91\x00\x02\x00\x08\xc0\xbf\x00/\x80\x01\x00\x00\x00x\x00\x06\xc0\xbf\x00\x02\x00\x08\xc00\x00/\x80\x01\x00\x00\x00x\x00\x08\xc00\x00\x04@\x00\x00\x08')